<!DOCTYPE html>
<html>
<head>
	<title>
		View - Attendance-Manager
	</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="assets/css/view.css">
	<link rel="icon" type="x-type/image" href="assets/imgs/favicon.png">
</head>
<body>

	<!-- Header -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	    <div class="container-fluid">
		    <a class="navbar-brand" href="#">
		    	<img class="logo" src="assets/imgs/favicon.png">
		    	Attendance Manager
		    </a>
		    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
		      <span class="navbar-toggler-icon"></span>
		    </button>
		    <div class="collapse navbar-collapse" id="navbar">
		        <ul class="navbar-nav ml-auto">
			        <li class="nav-item">
			            <a class="nav-link active" aria-current="page" href="index.html">
			            	<i class="fas fa-home"></i> Home
			        	</a>
			        </li>
			        <li class="nav-item" onclick="showTab('searchByDate')">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-calendar"></i> Search By Date
			        	</a>
			        </li>
			        <li class="nav-item" onclick="showTab('searchByClass')">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-pen"></i> Fetch By Class
			        	</a>
			        </li>
			        <li class="nav-item" onclick="showTab('customSearch')">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-database"></i> Custom By Search
			        	</a>
			        </li>
			        <li class="nav-item">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-info-circle"></i> About
			        	</a>
			        </li>
		        </ul>
		    </div>
	    </div>
	</nav>

	<!-- Container -->

		<!-- div class="main-container">

			<div class="btn-container">
				<button class="btn btn-success" id="btn">View By Date</button>
				<button class="btn btn-primary" id="btn2">View Full Attendance</button>
			</div>
		</div> -->
	  <!-- View by date form -->
	  <style>
	  	body {
	  	}
	  	.row {
	  		width: 100%;
	  		margin: 0px auto;
	  	}
	  </style>
		<main class="row container d-flex justify-content-center">
		<div class="col-12 col-xs-12 col-sm-12 col-md-8 col-lg-9">
			<div id="searchByDate" class="tab" style="display: block">
				<h2 class="">Search By Date</h2>
				<fieldset>
					<label>Date</label>
					<input type="date" id="date" class="form-control">
				</fieldset>
	            <button class="btn btn-warning" id="viewByDateBtn"><i class="fas fa-search"></i> View</button>
				<table class="table table-bordered text-white container">
					<thead class="table-dark">
						<th>Total</th>
						<th>Present</th>
						<th>Absent</th>
						<th>Date</th>
					</thead>
					<tbody id="table-body"></tbody>
				</table>
			</div>

		<!-- Viw by full attendance form -->
			<div id="searchByClass" class="tab">
				<h2 class="">Search By Class</h2>
				<fieldset>
					<label>Class</label>
						<select class="form-control">
						<option>Select</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
						<option>9</option>
						<option>10</option>
					</select>
				</fieldset>
	                <button class="btn btn-warning"><i class="fas fa-search"></i> View</button>
					<table class="table table-bordered text-white container">
						<thead class="table-dark">
							<th>Date</th>
							<th>Total</th>
							<th>Present</th>
							<th>Absent</th>
						</thead>
						<tbody id="table-body"></tbody>
					</table>
			</div>

			<!-- View by date form -->
			<div id="customSearch" class="tab">
				<h2 class="">Custom Search</h2>
				<fieldset> 
					<label>Class</label>
					<select class="form-control">
						<option>Select</option>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
						<option>7</option>
						<option>8</option>
						<option>9</option>
						<option>10</option>
					</select>
				</fieldset>
				<fieldset>
					<label>Date</label>
					<input type="date" name="" class="form-control">
				</fieldset>
	            <button class="btn btn-warning"><i class="fas fa-search"></i> View</button>
				<table class="table table-bordered text-white container">
					<thead class="table-dark">
						<th>Total</th>
						<th>Present</th>
						<th>Absent</th>
						<th>Date</th>
					</thead>
					<tbody id="table-body"></tbody>
				</table>
			</div>
		</div>
    	</main>
    <script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="https://kit.fontawesome.com/de41999cf3.js"></script>
	<script>

	function hideAllTabs() {
		$('.tab').hide();
	}

	function showTab(tab) {
		hideAllTabs();
		$("#"+tab).show();
	}
		
		//FetchSubmissionsByDate 
			$(document).ready(()=> {
				$('#viewByDateBtn').click(() => {
					let date = $('#date').val();

					let rawData = { date:date };
					let data = JSON.stringify(rawData);

					$.ajax({
						url: 'https://alphacoders.ga/projects/attendance-manager-api/fetchSubmissionsByDate.php',
						method: 'POST',
						data: data,
						dataType: "json",
						success: function(res) {
								console.log(res);
							if (res.status == true) {
								sessionStorage.setItem('loginStatus', 'true');
							sessionStorage.setItem("userInfo", JSON.stringify(res.userInfo));
						}
							else {
								alert(res.msg);
							window.location = "index.html";
							sessionStorage.setItem('loginStatus', 'false');
							}
						}

					})
				})
			});

	</script>

</body>
</html>
